<nav class="main-nav stuck">
  <div>
    <div>
      <a class="logo" href="{{ '/'|url }}">{% include 'includes/logo.svg' %}</a>

      <ul class="short-menu" id="short-nav">
        {% for item in bag('main-nav', this.alt) %}
          {% include 'includes/menu_item.html' %}
        {% endfor %}
      </ul>

      <ul class="menu" id="nav">
        {% for item in bag('main-nav', this.alt) %}
          {% include 'includes/menu_item.html' %}
          {% if item.children %}
          <ul>
            {% for item in item.children %}
              {% include 'includes/menu_item.html' %}
            {% endfor %}
          </ul>
          {% endif %}
        {% endfor %}
      </ul>

      <div class="language">
        <div>
          {% if this.language %}
            {% set current_language = this.language %}
          {% elif this.alt %}
            {% set current_language = this.alt %}
          {% else %}
            {% set current_language = "en" %}
          {% endif %}

          <ul class="menu" id="lang">
          {% for code, title in bag('languages.all').items() %}
            <li{% if current_language == code %} class="active"{% endif %}>
              <a href="{{ '.'|url(alt=code) }}">{{ title }}</a>
            </li>
          {% endfor %}
          </ul>
        </div>
      </div>

    </div>
  </div>
</nav>

<noscript>
  <style>
    #short-nav {
      display: table-cell;
    }
    #lang {
      display: block;
      text-align: left;
      list-style-type: none;
    }
    nav.main-nav.stuck {
      position:unset;
    }
  </style>
</noscript>
